# i-SENS 바이오센서 스트립 생산 대시보드 v3 — 프로젝트 레퍼런스

> 본 문서는 대시보드 v3 구현 시 참조하는 기준 문서다.
> 특히 **섹션 5(부호 방향 규칙)**은 치명적 오류 방지를 위한 유일 기준으로 간주한다.

---

## 1. 제품 구조

### 1.1 시트 구조
- 1 시트 = **12 Row × 50 Column = 600개 스트립**
- 제품 유형: **대면형(Counter-electrode)**
- 기본 구성: 하판 + 상판 + 양면테이프 + 조립 정렬

### 1.2 하판 (Bottom Plate)
- 인쇄 공정: **카본 → 절연 → 실버 (3도 인쇄)**
- 후속 공정: 분주(Dispensing)에서 시약 도포

### 1.3 상판 (Top Plate)
- 인쇄 공정: **카본 → 실버 (2도 인쇄)**
- 트레이 1번/2번 별도 보정 관리
- 상판 프린팅은 하판 로직과 공통 모듈 재사용 가능

### 1.4 조립
- 하판/상판 사이 양면테이프를 기준으로 정렬
- 타발홀 핀 기준으로 정렬 상태를 판정

---

## 2. 공정 흐름

### 2.1 하판 라인
```text
하판 카본 인쇄
  → 하판 절연 인쇄
    → 하판 실버 인쇄
      → 분주
        → 로우슬리팅
          → 50T 타발
            → 개별 슬리팅
              → 조립/검사
```

### 2.2 상판 라인
```text
상판 카본 인쇄
  → 상판 실버 인쇄
    → (필요 시 중간 검사)
      → 조립 공정으로 투입
```

### 2.3 대시보드 탭 관점
- 작업자 탭(7개): 공정별 독립 사용
- 관리자 탭(3개): 종합/트렌드/보고서

---

## 3. 현장 워크플로우 (4단계)

1. **셋업 확인**
   - 프린팅 위치/장비 상태/로우슬리터 기준점 확인
2. **시험 조립**
   - 1장 시험 조립 후 12 Row 치우침 측정, 보정값 도출
3. **개선 검증**
   - 보정 전후(Before/After) 비교
4. **생산 모니터링**
   - 주기 샘플링, 이상 감지, 조기 보정

---

## 4. 공정 간 연동

### 4.1 연동 대상
- **프린팅 ↔ 로우슬리터 ↔ 조립**
- 3개 공정이 동일한 마진 상태를 공유하고 영향도를 추적

### 4.2 연동 시나리오
1. 조립에서 마진 부족 감지
2. 관리자 판단 후 프린팅에 보정 요청 전달
3. 프린팅: 기존 입력(1차) + 추가 보정(2차) 계산
4. 로우슬리터/조립 마진 재확인 및 전체 영향 평가

### 4.3 학습 루프
- 추천 보정값과 실제 적용 결과를 누적 기록
- 동일 패턴 재발 시 보정 추천 정확도 향상

---

## 5. 부호 방향 규칙 ⚠️ 치명적

> 본 섹션은 보정 방향 반전 오류를 막기 위한 절대 규칙이다.

### 5.1 기본 원칙
- **양수(+) = 우측/위(상)**
- **음수(-) = 좌측/아래(하)**
- **보정 방향 = 편차 부호의 반대 방향**
  - 예: 편차가 +0.03mm(우/상)면 보정은 -0.03mm(좌/하) 방향 검토

### 5.2 UI 용어 규칙
- `X/Y` 용어 **사용 금지**
- 반드시 직관 표현 사용
  - 좌우: **←좌 / 우→**
  - 상하: **↑상 / 하↓**

### 5.3 공정별 해석 메모
- 프린팅 상하: 일반 좌표계와 동일 해석 (양수=위, 음수=아래)
- 로우슬리터 타발폭 상하: 양수=위 쏠림, 음수=아래 쏠림

### 5.4 구현 체크포인트
- 차트 축 라벨/툴팁/테이블 헤더에 X/Y 금지
- 보정 추천 로직에서 항상 `correction = -deviation`
- 테스트 케이스에 ±부호 반전 검증 포함

---

## 6. CSV 파일 명세

### 6.1 공통 규격
- 인코딩: **UTF-16 LE BOM**
- 구분자: **탭(\t)**
- 블록: **`:BEGIN` ~ `:END`** 구간 파싱
- 원본 보존: raw 파일은 수정하지 않고 processed JSON 별도 생성

### 6.2 CSV 파일명 규칙 (확정)
- 패턴: `{날짜6자리}_{공정+라인}_{Lot명}_{상태}_{시트순번}_{메모(선택)}.csv`

구성요소:
- 날짜: `YYMMDD` 6자리 (예: `250122`)
- 공정+라인: `프린팅A`, `분주A`, `로우슬리터A`, `전극면적A`, `샘플검사A` 등
- Lot명: 생산 로트 식별자 (예: `가속3차`, `LOT001`)
- 상태: `SET`(셋팅) | `TEST`(테스트) | `PRD`(생산)
- 시트순번: 해당 상태에서 몇 번째 시트인지 나타내는 숫자
- 메모: 선택사항. 이슈/조건변경 기록 (예: `노즐교체후`, `스텐실교체후`)

예시:
- `250122_프린팅A_가속3차_SET_3.csv`
- `250122_프린팅A_가속3차_PRD_15.csv`
- `250122_분주A_가속3차_TEST_1_노즐교체후.csv`
- `250122_로우슬리터A_LOT001_PRD_7.csv`
- `250122_샘플검사A_가속3차_SET_2_조건변경.csv`

파싱 규칙:
- 구분자: `_` (언더스코어)
- `split('_')` 기준 최소 5개 필드 필요, 6번째부터는 메모로 결합
- 상태 필드는 `SET/TEST/PRD` 3종만 허용

### 6.3 파일 5종
| 유형 | 기준 줄 수 | 식별 키워드 예시 | 비고 |
|------|-----------:|------------------|------|
| 프린팅 | 47줄 | 타발기준_카본, 거리 타발 | 위치/편차 중심 |
| 전극면적 | 302줄 | 전극폭, 전극길이 | 규격 특성값 |
| 분주형상 | 542줄 | 분주면적, 분주간격 | 형상/간격 분석 |
| 로우슬리터 | 20줄 | 전체폭, 타발폭 | 폭/쏠림 기준 |
| 샘플검사 | 206줄 | 타발홀, 양면, 양면상하 | 조립 최종 품질 |

### 6.3 CSV 파일명 규칙 (현장 확정)
- 형식: `{6자리날짜}_{공정명+라인}_{Lot명}_{상태}_{시트순번}_{메모}.csv`
- 상태 코드 3종
  - `SET` = 셋팅 (생산 전 세팅 단계)
  - `TEST` = 테스트
  - `PRD` = 생산
- 시트순번: 해당 상태에서 몇 번째 시트인지 (순서)
- 메모: 선택사항 (이슈/조건변경 기록, 없으면 생략)
- `_` split 기준
  - `[0]=날짜, [1]=공정라인, [2]=Lot명, [3]=상태, [4]=시트순번, [5]=메모(선택)`

예시:
- `250122_프린팅A_가속3차_SET_3.csv`
- `250122_프린팅A_가속3차_PRD_15.csv`
- `250122_분주A_가속3차_TEST_1_노즐교체후.csv`
- `250122_로우슬리터A_가속3차_SET_1.csv`

---

## 7. 판정 기준

### 7.1 상태 색상
- **OK**: `#2D68C4`
- **CHECK**: `#F59E0B`
- **NG**: `#EF4444`

### 7.2 임계값(기본)
- CHECK: **±0.12mm** 경계 접근/초과 구간
- NG: **±0.15mm** 초과 구간
- 공정별 상세 임계값이 별도 정의되면 해당 정의를 우선 적용

### 7.3 판정 예시
- |편차| < 0.12mm → OK
- 0.12mm ≤ |편차| < 0.15mm → CHECK
- |편차| ≥ 0.15mm → NG

---

## 8. 디자인 규칙

### 8.1 i-SENS CI 색상
- i-SENS Blue: `#171C8F` (Primary)
- Soulstone Blue: `#2D68C4` (Secondary)
- Dark Pastel Blue: `#88A7E1` (Accent)
- Brilliant White: `#EDF1FE` (Background)

### 8.2 현장 UX 기준
- 대상 해상도: **QHD 2560×1440 (27인치 기준)**
- 최소 조작 영역: **44px**
- 텍스트 가독성: 본문 16px+, 라벨 13px+, 차트 수치 14px+
- 표 기본: 중앙 정렬, 헤더 말줄임 금지(줄바꿈 허용)

---

## 9. 용어 사전

- **편차(Deviation)**: 기준값 대비 측정값 차이
- **보정값(Correction)**: 편차를 줄이기 위해 설비에 반영하는 값
- **마진(Margin)**: 허용 한계까지 남은 여유
- **SET**: 생산/측정 단위 묶음 식별 번호
- **공정 연동(Process Coupling)**: 선행 보정이 후행 공정에 미치는 영향 공유
- **학습 데이터(Learning Data)**: 추천-적용-결과 이력을 누적한 피드백 데이터

---

본 문서는 구현·검증·리뷰 시 공통 기준으로 사용한다.
